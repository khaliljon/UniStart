# ü§ñ AI Flashcard Generator - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ flashcards —á–µ—Ä–µ–∑ **Claude Sonnet 4.5** (–≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è API –∫–ª—é—á–∞).

### üìÅ –§–∞–π–ª—ã

**Backend:**
- `DTOs/AIFlashcardDtos.cs` - DTOs –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- `Services/AI/AIFlashcardGeneratorService.cs` - –°–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Claude
- `Controllers/AI/AIFlashcardController.cs` - API endpoints
- `appsettings.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `AI:Flashcards`)
- `Program.cs` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

**Frontend:**
- `unistart-frontend/src/components/AIFlashcardGenerator.tsx` - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `unistart-frontend/src/components/AIFlashcardGenerator.css` - –°—Ç–∏–ª–∏
- `unistart-frontend/src/pages/admin/AdminAIFlashcardsPage.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
- `unistart-frontend/src/App.tsx` - –†–æ—É—Ç–∏–Ω–≥ (–¥–æ–±–∞–≤–ª–µ–Ω `/admin/ai-flashcards`)
- `unistart-frontend/src/components/layout/Layout.tsx` - –ù–∞–≤–∏–≥–∞—Ü–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "‚ú® AI –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä")

**NuGet –ø–∞–∫–µ—Ç—ã:**
- `Anthropic.SDK` v5.8.0 ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è flashcards –∏–∑ —Ç–µ–∫—Å—Ç–∞ (–ª–µ–∫—Ü–∏–∏, —Å—Ç–∞—Ç—å–∏, –∑–∞–º–µ—Ç–∫–∏)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (easy/medium/hard)
- ‚úÖ –í—ã–±–æ—Ä —è–∑—ã–∫–∞ (ru/en)
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
- ‚úÖ –î–æ—Å—Ç—É–ø –¥–ª—è Admin –∏ Teacher —Ä–æ–ª–µ–π

---

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á

### –í–∞—Ä–∏–∞–Ω—Ç 1: Gemini (–ë–ï–°–ü–õ–ê–¢–ù–û!) ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**: 1500 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å, –±–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã!

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://aistudio.google.com/app/apikey
2. –ù–∞–∂–º–∏—Ç–µ "Create API Key"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `AIza...`)
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `appsettings.json`:

```json
{
  "AI": {
    "Flashcards": {
      "GoogleAIApiKey": "AIzaSy...",  // ‚Üê –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –∫–ª—é—á
      "AnthropicApiKey": "",
      "OpenAIApiKey": "",
      "PreferredModel": "gemini-2.0-flash",
      "MaxTokens": 4096,
      "Temperature": 0.7
    }
  }
}
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –ú–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ 1500 –Ω–∞–±–æ—Ä–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –¥–µ–Ω—å –ë–ï–°–ü–õ–ê–¢–ù–û!

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Claude (–ü–ª–∞—Ç–Ω—ã–π, –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://console.anthropic.com
2. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ —Ä–∞–∑–¥–µ–ª–µ "API Keys"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-ant-...`)

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ appsettings.json

```json
{
  "AI": {
    "Flashcards": {
      "AnthropicApiKey": "sk-ant-api03-–í–ê–®_–ö–õ–Æ–ß_–ó–î–ï–°–¨",
      "PreferredModel": "claude-sonnet-4.5",
      "MaxTokens": 4096,
      "Temperature": 0.7
    }
  }
}
```

### 3. –î–ª—è production - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Linux/Mac
export AI__Flashcards__AnthropicApiKey="sk-ant-api03-..."

# Windows PowerShell
$env:AI__Flashcards__AnthropicApiKey="sk-ant-api03-..."

# Docker
docker run -e AI__Flashcards__AnthropicApiKey="sk-ant-..." unistart
```

---

## üì° API Endpoints

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```http
GET /api/ai/flashcards/status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "isConfigured": true,
  "availableModels": ["claude-sonnet-4.5"],
  "message": "‚úÖ AI —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ"
}
```

---

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å flashcards
```http
POST /api/ai/flashcards/generate
Authorization: Bearer {JWT_TOKEN}
Content-Type: application/json

{
  "sourceText": "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –∏–∑—É—á–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –Ω–∞ –∞—Ç–æ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ...",
  "count": 10,
  "difficulty": "medium",
  "language": "ru",
  "newSetTitle": "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ - –æ—Å–Ω–æ–≤—ã"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `sourceText` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `count` (1-50) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫
- `difficulty` - "easy", "medium", "hard"
- `language` - "ru", "en" –∏ —Ç.–¥.
- `newSetTitle` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä
- `flashcardSetId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –Ω–∞–±–æ—Ä

**–û—Ç–≤–µ—Ç:**
```json
{
  "flashcards": [
    {
      "question": "–ß—Ç–æ –∏–∑—É—á–∞–µ—Ç –∫–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞?",
      "answer": "–ü–æ–≤–µ–¥–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –Ω–∞ –∞—Ç–æ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ",
      "explanation": "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —è–≤–ª–µ–Ω–∏—è...",
      "difficultyLevel": 3,
      "tags": ["—Ñ–∏–∑–∏–∫–∞", "–∫–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞"]
    }
  ],
  "flashcardSetId": 123,
  "modelUsed": "claude-sonnet-3.5",
  "tokensUsed": 1250,
  "success": true
}
```

---

### 3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π (Admin only)
```http
GET /api/ai/flashcards/models
Authorization: Bearer {ADMIN_JWT_TOKEN}
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Claude Sonnet 3.5:**
- Input: $3 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- Output: $15 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:**
- –¢–µ–∫—Å—Ç 2000 —Å–ª–æ–≤ = ~3000 —Ç–æ–∫–µ–Ω–æ–≤ input
- 10 flashcards = ~500 —Ç–æ–∫–µ–Ω–æ–≤ output
- **–°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.017 –∑–∞ –∑–∞–ø—Ä–æ—Å**

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–¥–ª—è —É—á–∏—Ç–µ–ª–µ–π)

1. –í–æ–π—Ç–∏ –∫–∞–∫ Teacher –∏–ª–∏ Admin
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç (–ª–µ–∫—Ü–∏—è, —É—á–µ–±–Ω–∏–∫, —Å—Ç–∞—Ç—å—è)
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/ai/flashcards/generate`
4. –ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ç–æ–≤—ã–µ flashcards
5. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

---

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPT-4o (fallback)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Gemini 2.0 Flash (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- [ ] Frontend UI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [ ] –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ PDF/DOCX
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ä–∞–π—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ú–æ–¥–µ–ª—å **Claude Sonnet 3.5** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–π—á–∞—Å (4.5 –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ SDK –ø–æ–∑–∂–µ)
- –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç JSON –æ—Ç–≤–µ—Ç –æ—Ç Claude
- –í–∞–ª–∏–¥–∞—Ü–∏—è: min 1, max 50 flashcards –∑–∞ –∑–∞–ø—Ä–æ—Å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

---

## üõ†Ô∏è Troubleshooting

**–û—à–∏–±–∫–∞ "AI —Å–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ API –∫–ª—é—á–∞ –≤ `appsettings.json`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-ant-`

**–û—à–∏–±–∫–∞ "Rate limit exceeded":**
- Anthropic –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏

**–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:**
- Claude –∏–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤–æ–∫—Ä—É–≥ JSON
- –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è - –∏–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç
