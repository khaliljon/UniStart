# üìä –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥–µ–ª–µ–π –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. **–≠–∫–∑–∞–º–µ–Ω—ã (Exams)** - ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
UserExamAttempt (–ø–æ–ø—ã—Ç–∫–∞)
  ‚îú‚îÄ‚îÄ Score, Percentage, Passed, TimeSpent
  ‚îú‚îÄ‚îÄ UserId ‚Üí ApplicationUser
  ‚îú‚îÄ‚îÄ ExamId ‚Üí Exam
  ‚îî‚îÄ‚îÄ UserExamAnswer[] (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞)
        ‚îú‚îÄ‚îÄ IsCorrect
        ‚îú‚îÄ‚îÄ PointsEarned
        ‚îú‚îÄ‚îÄ QuestionId ‚Üí ExamQuestion
        ‚îú‚îÄ‚îÄ SelectedAnswerId ‚Üí ExamAnswer
        ‚îî‚îÄ‚îÄ AttemptId ‚Üí UserExamAttempt
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- ‚úÖ –õ–µ–≥–∫–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º
- ‚úÖ –ú–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç —Å—Ç—É–¥–µ–Ω—Ç—ã
- ‚úÖ –•–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

---

### 2. **–ö–≤–∏–∑—ã (Quizzes)** - ‚ö†Ô∏è –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (JSON)

```
UserQuizAttempt (–ø–æ–ø—ã—Ç–∫–∞)
  ‚îú‚îÄ‚îÄ Score, Percentage, TimeSpentSeconds
  ‚îú‚îÄ‚îÄ UserId ‚Üí ApplicationUser
  ‚îú‚îÄ‚îÄ QuizId ‚Üí Quiz
  ‚îî‚îÄ‚îÄ UserAnswersJson (JSON —Å—Ç—Ä–æ–∫–∞) = {"questionId": [answerId1, answerId2]}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –û—Ç–≤–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSON, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚ö†Ô∏è –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º
- ‚ö†Ô∏è –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JOIN –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –æ—Ç–≤–µ—Ç–∞–º
- ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ UserQuizAnswer

**–ü–æ—á–µ–º—É —Ç–∞–∫ —Å–¥–µ–ª–∞–Ω–æ:**
- –í–æ–∑–º–æ–∂–Ω–æ, –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∞—Å—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- JSON –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤ (–º–µ–Ω—å—à–µ —Ç–∞–±–ª–∏—Ü, –º–µ–Ω—å—à–µ JOIN'–æ–≤)
- –ù–æ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö —ç—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π

---

### 3. **–ö–∞—Ä—Ç–æ—á–∫–∏ (Flashcards)** - ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
Flashcard (—Å–∞–º–∞ –∫–∞—Ä—Ç–æ—á–∫–∞)
  ‚îú‚îÄ‚îÄ LastReviewedAt (‚ùå –û–ë–©–ï–ï –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!)
  ‚îú‚îÄ‚îÄ NextReviewDate (‚ùå –û–ë–©–ï–ï –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!)
  ‚îú‚îÄ‚îÄ Repetitions (‚ùå –û–ë–©–ï–ï –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!)
  ‚îú‚îÄ‚îÄ EaseFactor (‚ùå –û–ë–©–ï–ï –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!)
  ‚îî‚îÄ‚îÄ Interval (‚ùå –û–ë–©–ï–ï –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!)
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå **LastReviewedAt** –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—É—á–∏–ª –∫–∞—Ä—Ç–æ—á–∫—É
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å "–ò–∑—É—á–∞—é—â–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤" –¥–ª—è –Ω–∞–±–æ—Ä–∞
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–∏ –∏–∑—É—á–µ–Ω –Ω–∞–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `ReviewFlashcard()` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `LastReviewedAt` –Ω–∞ —Å–∞–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç A –∏–∑—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É, `LastReviewedAt` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ
- –°—Ç—É–¥–µ–Ω—Ç B –≤–∏–¥–∏—Ç —Ç–æ—Ç –∂–µ `LastReviewedAt`, —Ö–æ—Ç—è –æ–Ω –∫–∞—Ä—Ç–æ—á–∫—É –Ω–µ –∏–∑—É—á–∞–ª

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
1. **–ò–∑—É—á–∞—é—â–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤** - —Å—Ç—É–¥–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –æ—Ç–∫—Ä—ã–ª–∏ –Ω–∞–±–æ—Ä (–Ω–∞—á–∞–ª–∏ –∏–∑—É—á–µ–Ω–∏–µ)
2. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—É—á–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã** - –Ω–∞–±–æ—Ä—ã, –≥–¥–µ —Å—Ç—É–¥–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏
3. **–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º** - –∫–∞–∫–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∏–∑—É—á–µ–Ω–∞ –∫–∞–∫–∏–º —Å—Ç—É–¥–µ–Ω—Ç–æ–º
4. **–ò—Å—Ç–æ—Ä–∏—é –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π** - –∫–æ–≥–¥–∞ —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä—è–ª –∫–∞—Ä—Ç–æ—á–∫—É –∏ —Å –∫–∞–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º

---

## üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

#### 1.1 –°–æ–∑–¥–∞—Ç—å `UserFlashcardProgress`

```csharp
public class UserFlashcardProgress
{
    public int Id { get; set; }
    
    // –°–≤—è–∑–∏
    public string UserId { get; set; }
    public ApplicationUser User { get; set; } = null!;
    public int FlashcardId { get; set; }
    public Flashcard Flashcard { get; set; } = null!;
    
    // SM-2 –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    public double EaseFactor { get; set; } = 2.5;
    public int Interval { get; set; } = 0;
    public int Repetitions { get; set; } = 0;
    public DateTime? NextReviewDate { get; set; }
    public DateTime? LastReviewedAt { get; set; }
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    public int TotalReviews { get; set; } = 0; // –í—Å–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
    public int CorrectReviews { get; set; } = 0; // –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
    public DateTime? FirstReviewedAt { get; set; } // –ü–µ—Ä–≤–æ–µ –∏–∑—É—á–µ–Ω–∏–µ
    public bool IsMastered { get; set; } = false; // –ò–∑—É—á–µ–Ω–∞ –ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é
}
```

#### 1.2 –°–æ–∑–¥–∞—Ç—å `UserFlashcardSetAccess`

```csharp
public class UserFlashcardSetAccess
{
    public int Id { get; set; }
    
    // –°–≤—è–∑–∏
    public string UserId { get; set; }
    public ApplicationUser User { get; set; } = null!;
    public int FlashcardSetId { get; set; }
    public FlashcardSet FlashcardSet { get; set; } = null!;
    
    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–∞
    public DateTime FirstAccessedAt { get; set; } = DateTime.UtcNow; // –ü–µ—Ä–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞–±–æ—Ä–∞
    public DateTime? LastAccessedAt { get; set; } // –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø
    public int AccessCount { get; set; } = 1; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–ª–∏ –Ω–∞–±–æ—Ä
    
    // –ü—Ä–æ–≥—Ä–µ—Å—Å
    public bool IsCompleted { get; set; } = false; // –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—É—á–µ–Ω –ª–∏ –Ω–∞–±–æ—Ä
    public DateTime? CompletedAt { get; set; } // –ö–æ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω
    public int CardsStudiedCount { get; set; } = 0; // –°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑—É—á–µ–Ω–æ
    public int TotalCardsCount { get; set; } // –í—Å–µ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –Ω–∞–±–æ—Ä–µ (–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞)
}
```

#### 1.3 –û–±–Ω–æ–≤–∏—Ç—å `Flashcard`

–£–±—Ä–∞—Ç—å SM-2 –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `Flashcard`, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:
- Question, Answer, Explanation
- Type, OptionsJson, MatchingPairsJson, SequenceJson
- OrderIndex
- FlashcardSetId

#### 1.4 –°–æ–∑–¥–∞—Ç—å `UserFlashcardReview` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏)

```csharp
public class UserFlashcardReview
{
    public int Id { get; set; }
    
    // –°–≤—è–∑–∏
    public int UserFlashcardProgressId { get; set; }
    public UserFlashcardProgress Progress { get; set; } = null!;
    
    // –î–∞–Ω–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
    public int Quality { get; set; } // 0-5
    public bool IsCorrect { get; set; }
    public DateTime ReviewedAt { get; set; } = DateTime.UtcNow;
    public TimeSpan? TimeSpent { get; set; } // –í—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç
}
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### 2.1 –î–æ–±–∞–≤–∏—Ç—å `UserQuizAnswer` (–∫–∞–∫ —É —ç–∫–∑–∞–º–µ–Ω–æ–≤)

```csharp
public class UserQuizAnswer
{
    public int Id { get; set; }
    
    public bool IsCorrect { get; set; }
    public int PointsEarned { get; set; }
    
    // –°–≤—è–∑–∏
    public int AttemptId { get; set; }
    public UserQuizAttempt Attempt { get; set; } = null!;
    public int QuestionId { get; set; }
    public QuizQuestion Question { get; set; } = null!;
    public int? SelectedAnswerId { get; set; } // –ú–æ–∂–µ—Ç –±—ã—Ç—å null –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
    public QuizAnswer? SelectedAnswer { get; set; }
}
```

#### 2.2 –û–±–Ω–æ–≤–∏—Ç—å `UserQuizAttempt`

–£–±—Ä–∞—Ç—å `UserAnswersJson`, –¥–æ–±–∞–≤–∏—Ç—å:
```csharp
public ICollection<UserQuizAnswer> UserAnswers { get; set; } = new List<UserQuizAnswer>();
```

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –î–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫:
1. ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ "–ò–∑—É—á–∞—é—â–∏—Ö"** - —Å—á–∏—Ç–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `UserFlashcardSetAccess`
2. ‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å** - –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π `NextReviewDate`, `EaseFactor` –∏ —Ç.–¥.
3. ‚úÖ **–¢–æ—á–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –∏–∑—É—á–µ–Ω–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤** - –ø—Ä–æ–≤–µ—Ä—è–µ–º `IsCompleted` –≤ `UserFlashcardSetAccess`
4. ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–∂–Ω–µ–µ –≤—Å–µ–≥–æ, –≥–¥–µ —Å—Ç—É–¥–µ–Ω—Ç—ã –æ—à–∏–±–∞—é—Ç—Å—è

### –î–ª—è –∫–≤–∏–∑–æ–≤:
1. ‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å —ç–∫–∑–∞–º–µ–Ω–∞–º–∏** - –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–µ–π
2. ‚úÖ **–ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã, JOIN'—ã
3. ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤** - –ª–µ–≥–∫–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã —Å–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ
4. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º JSON

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏** (`UserFlashcardProgress`, `UserFlashcardSetAccess`)
2. **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
3. **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞–±–æ—Ä–∞, –≥–¥–µ –µ—Å—Ç—å `LastReviewedAt`, —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `UserFlashcardSetAccess`
   - –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ —Å `LastReviewedAt != null` —Å–æ–∑–¥–∞—Ç—å `UserFlashcardProgress`
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ SM-2 –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `Flashcard` –≤ `UserFlashcardProgress`
4. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:**
   - `SpacedRepetitionService` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å `UserFlashcardProgress`
   - `ReviewFlashcard` –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å `UserFlashcardProgress`
   - `GetFlashcardSet` –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å `UserFlashcardSetAccess` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
5. **–£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–æ–ª—è** –∏–∑ `Flashcard` (—á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏—é)

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑—É—á–∞—é—â–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
```csharp
var studyingStudents = await _context.UserFlashcardSetAccess
    .Where(a => a.FlashcardSetId == setId)
    .Select(a => a.UserId)
    .Distinct()
    .CountAsync();
```

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—É—á–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```csharp
var completedSets = await _context.UserFlashcardSetAccess
    .Where(a => a.UserId == userId && a.IsCompleted)
    .CountAsync();
```

### –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∞–±–æ—Ä—É:
```csharp
var progress = await _context.UserFlashcardSetAccess
    .Where(a => a.UserId == userId && a.FlashcardSetId == setId)
    .Select(a => new
    {
        a.CardsStudiedCount,
        a.TotalCardsCount,
        ProgressPercent = (double)a.CardsStudiedCount / a.TotalCardsCount * 100
    })
    .FirstOrDefaultAsync();
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–∞—Ç—å —Å –∫–∞—Ä—Ç–æ—á–µ–∫** - —Ç–∞–º —Å–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å `LastReviewedAt`
2. **–î–æ–±–∞–≤–∏—Ç—å `UserFlashcardSetAccess`** - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–∏–π –Ω–∞–±–æ—Ä–æ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å `UserFlashcardProgress`** - –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
4. **–ü–æ–∑–∂–µ —É–ª—É—á—à–∏—Ç—å –∫–≤–∏–∑—ã** - –¥–æ–±–∞–≤–∏—Ç—å `UserQuizAnswer` –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ—Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Flashcard.LastReviewedAt`
- –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å backup –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

